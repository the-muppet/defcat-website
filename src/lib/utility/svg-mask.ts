/**
 * Creates a mask function from SVG path data
 * @param pathData - The SVG path 'd' attribute
 * @param viewBox - The SVG viewBox (default: "0 0 32 32")
 * @param blur - Optional blur amount
 * @returns A mask function compatible with CSS mask property
 */
const createSVGMask = (
  pathData: string,
  viewBox: string = "0 0 32 32",
  blur: number = 2
) => {
  const blurFilter = blur > 0
    ? `<filter id="blur"><feGaussianBlur stdDeviation="${blur}" /></filter>`
    : "";
  
  const filterAttr = blur > 0 ? 'filter="url(%23blur)"' : "";

 return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="${viewBox}"><defs>${blurFilter}</defs><path fill="white" d="${pathData}" ${filterAttr}/></svg>')`;
};

const MANA_PATHS = {
  RED:"M30.857 22.306c-1.393 3.322-4.16 4.983-8.304 4.983-0.759 0-1.583 0.095-2.468 0.284-1.329 0.285-1.993 0.681-1.993 1.188 0 0.158 0.11 0.339 0.332 0.545 0.221 0.206 0.412 0.308 0.569 0.308-0.791 0-0.253 0.024 1.613 0.071s3.038 0.071 3.512 0.071c-2.752 1.613-7.356 2.356-13.81 2.23-2.12-0.031-3.939-0.965-5.457-2.8-1.488-1.741-2.231-3.686-2.231-5.837 0-2.277 0.767-4.216 2.302-5.814 1.533-1.596 3.441-2.396 5.718-2.396 0.506 0 1.178 0.111 2.017 0.332s1.4 0.332 1.684 0.332c1.17 0 2.626-0.482 4.367-1.448s2.563-1.448 2.468-1.448c-0.317 3.322-1.424 5.553-3.323 6.691-1.36 0.791-2.040 1.566-2.040 2.325 0 0.475 0.285 0.855 0.854 1.14 0.443 0.222 0.933 0.333 1.471 0.333 0.823 0 1.63-0.506 2.421-1.518 0.79-1.013 1.139-1.93 1.044-2.753-0.095-0.949-0.031-2.089 0.19-3.416 0.063-0.38 0.292-0.846 0.687-1.399s0.752-0.894 1.068-1.021c0 0.284-0.103 0.759-0.309 1.423s-0.308 1.156-0.308 1.471c0 0.696 0.189 1.234 0.569 1.613 0.569-0.221 1.075-0.933 1.519-2.136 0.379-0.917 0.6-1.803 0.664-2.657-1.329-0.063-2.603-0.664-3.82-1.804s-1.827-2.373-1.827-3.701c0-0.221 0.031-0.443 0.095-0.665 0.189 0.285 0.474 0.728 0.853 1.329 0.538 0.791 0.95 1.186 1.235 1.186 0.379 0 0.569-0.396 0.569-1.186 0-1.012-0.27-1.93-0.807-2.752-0.601-0.981-1.377-1.471-2.326-1.471-0.443 0-1.108 0.238-1.992 0.712-0.887 0.474-1.694 0.712-2.42 0.712-0.222 0-1.204-0.286-2.943-0.855 3.068-0.505 4.603-0.964 4.603-1.376 0-1.075-2.104-1.804-6.311-2.183-0.412-0.031-1.171-0.095-2.278-0.19 0.126-0.158 1.028-0.332 2.706-0.522 1.423-0.157 2.42-0.237 2.989-0.237 7.529 0 12.307 3.655 14.332 10.963 0.348-0.288 0.523-0.77 0.523-1.443 0-0.866-0.253-1.957-0.759-3.272-0.191-0.513-0.491-1.283-0.902-2.309 2.594 3.306 3.892 6.438 3.892 9.394 0 1.558-0.365 2.972-1.092 4.243-0.474 0.859-1.361 1.955-2.657 3.29-1.297 1.335-2.183 2.368-2.658 3.099 1.74-0.474 2.88-0.838 3.418-1.092 1.201-0.537 2.293-1.344 3.274-2.42 0 0.412-0.174 1.030-0.522 1.852zM10.166 3.656c0 0.569-0.317 0.933-0.949 1.091l-1.234 0.19c-0.443 0.221-1.092 1.092-1.946 2.61-0.095-0.474-0.237-1.138-0.427-1.993-0.285 0.032-0.759 0.285-1.423 0.759-0.285 0.221-0.744 0.553-1.377 0.996 0.191-1.139 0.823-2.292 1.899-3.464 1.139-1.296 2.246-1.945 3.322-1.945 1.423 0 2.135 0.586 2.135 1.756zM18.424 8.022c0 0.538-0.293 0.989-0.878 1.353s-1.163 0.546-1.732 0.546c-0.759 0-1.44-0.427-2.040-1.282-0.729-1.044-1.472-1.724-2.231-2.042 0.158-0.157 0.348-0.237 0.57-0.237 0.285 0 0.766 0.221 1.447 0.664s1.115 0.665 1.306 0.665c0.158 0 0.419-0.221 0.783-0.665s0.767-0.664 1.21-0.664c1.044 0 1.566 0.554 1.566 1.661z",
  BLUE:"M23.11 29.095c-1.903 1.937-4.248 2.905-7.033 2.905-3.126 0-5.605-1.070-7.439-3.21-1.733-2.038-2.599-4.637-2.599-7.795 0-3.397 1.478-7.271 4.433-11.62 2.411-3.566 5.248-6.692 8.509-9.375-0.476 2.175-0.713 3.72-0.713 4.637 0 2.107 0.662 4.162 1.986 6.166 1.631 2.378 2.87 4.145 3.72 5.299 1.325 2.005 1.987 3.958 1.987 5.859 0.001 2.82-0.951 5.198-2.852 7.133zM23.058 18.216c-0.509-1.138-1.104-1.893-1.784-2.268 0.102 0.204 0.153 0.493 0.153 0.867 0 0.714-0.204 1.732-0.612 3.057l-0.662 2.038c0 1.189 0.593 1.784 1.783 1.784 1.256 0 1.885-0.833 1.885-2.497 0-0.848-0.254-1.842-0.764-2.981z",
  GREEN:"M31.729 17.957c0 0.601-0.232 1.14-0.698 1.621s-0.998 0.72-1.598 0.72c-0.959 0-1.666-0.45-2.115-1.35l-2.115-0.090c-0.451 0-1.336 0.196-2.656 0.585-1.41 0.39-2.221 0.705-2.431 0.945-0.33 0.36-0.599 1.2-0.81 2.521-0.181 1.080-0.27 1.875-0.27 2.386 0 0.809 0.127 1.403 0.382 1.778s0.78 0.69 1.575 0.945c0.794 0.255 1.283 0.398 1.463 0.428 0.12 0 0.314-0.015 0.585-0.045h0.54c0.389 0 0.794 0.061 1.215 0.18 0.6 0.18 0.856 0.42 0.766 0.721-0.421-0.060-1.155 0.030-2.205 0.27l1.26 0.63c0 0.36-0.51 0.54-1.53 0.54-0.271 0-0.638-0.060-1.104-0.179-0.465-0.121-0.773-0.18-0.922-0.18h-0.585c-0.030 0.3-0.12 0.749-0.27 1.35-0.511-0.030-1.11-0.331-1.8-0.9s-1.125-0.855-1.305-0.855c-0.181 0-0.436 0.286-0.766 0.855-0.331 0.569-0.495 0.96-0.495 1.17-0.39-0.21-0.719-0.601-0.991-1.17-0.12-0.391-0.255-0.78-0.404-1.17-0.3 0.030-0.856 0.661-1.665 1.891h-0.226c-0.060-0.091-0.286-0.721-0.675-1.891-0.93-0.3-1.8-0.45-2.611-0.45-0.39 0-0.99 0.090-1.8 0.27l-1.26-0.089c0.179-0.18 0.704-0.525 1.575-1.035 1.020-0.6 1.8-0.901 2.34-0.901 0.089 0 0.208 0.015 0.36 0.045 0.149 0.031 0.27 0.045 0.36 0.045 0.208 0 0.547-0.112 1.012-0.338 0.465-0.224 0.735-0.427 0.809-0.607 0.076-0.182 0.114-0.646 0.114-1.396 0-1.71-0.45-2.985-1.351-3.825-0.781-0.75-2.070-1.29-3.871-1.621-0.48 1.71-1.83 2.566-4.050 2.566-0.721 0-1.441-0.435-2.16-1.305s-1.079-1.666-1.079-2.386c0-1.11 0.464-2.025 1.394-2.747-0.749-0.779-1.125-1.574-1.125-2.384 0-0.751 0.232-1.41 0.698-1.982 0.465-0.569 1.073-0.899 1.823-0.99-0.060-0.959 0.255-1.62 0.945-1.98-0.33-0.329-0.495-0.914-0.495-1.754 0-0.99 0.33-1.816 0.99-2.476s1.485-0.991 2.475-0.991c1.081 0 1.966 0.377 2.656 1.126 0.87-2.97 2.746-4.456 5.625-4.456 1.5 0 2.82 0.6 3.961 1.801 0.42 0.45 0.63 0.69 0.63 0.719-0.36 0-0.179-0.068 0.54-0.202s1.244-0.203 1.576-0.203c1.169 0 2.205 0.435 3.105 1.305 0.78 0.78 1.32 1.77 1.621 2.97 0.209 0.030 0.54 0.12 0.99 0.269 0.659 0.332 0.99 0.9 0.99 1.711 0 0.151-0.121 0.436-0.36 0.855 1.92 1.080 2.88 2.58 2.88 4.501 0 0.54-0.21 1.291-0.63 2.251 0.78 0.449 1.17 1.11 1.17 1.98zM13.186 19.937v-0.585c0-0.69-0.337-1.32-1.012-1.89s-1.358-0.855-2.048-0.855c-0.841 0-1.62 0.195-2.341 0.584 1.59-0.089 3.391 0.826 5.4 2.746zM12.377 14.357c-0.45-0.511-0.84-1.036-1.171-1.576-1.26 0.33-1.89 0.705-1.89 1.124 0.36-0.029 0.885 0.038 1.575 0.203s1.186 0.248 1.486 0.248zM15.123 12.961v-1.98c-0.721-0.12-1.157-0.18-1.305-0.18v0.675l1.305 1.486zM20.973 11.701c-0.36-0.15-1.036-0.45-2.025-0.9v3.87c1.41-0.811 2.084-1.801 2.025-2.97zM23.447 17.012l-0.989-1.215c-0.6 0.42-1.208 0.848-1.823 1.283s-1.148 0.923-1.597 1.463c1.35-0.721 2.821-1.23 4.41-1.531z",
  WHITE:"M31.915 18.358c-2.189-1.234-3.593-1.852-4.21-1.852-0.448 0-0.799 0.344-1.052 1.032s-0.758 1.031-1.515 1.031c-0.309 0-0.94-0.112-1.895-0.336-0.533 0.814-0.8 1.334-0.8 1.558 0 0.309 0.23 0.673 0.689 1.095s0.846 0.631 1.162 0.631c0.201 0 0.473-0.042 0.817-0.127 0.344-0.083 0.574-0.126 0.689-0.126 0.345 0 0.516 0.632 0.516 1.895 0 1.207-0.28 3.059-0.842 5.558-0.73-2.863-1.502-4.295-2.315-4.295-0.113 0-0.344 0.084-0.695 0.254-0.351 0.168-0.611 0.252-0.779 0.252-0.814 0-1.543-0.743-2.189-2.232-1.291 0.197-1.937 0.857-1.937 1.98 0 0.562 0.259 1.010 0.779 1.347 0.518 0.336 0.779 0.576 0.779 0.716 0 0.759-1.109 1.924-3.327 3.495-1.178 0.842-1.993 1.431-2.441 1.768 0.392-0.505 0.785-1.164 1.179-1.978 0.448-0.926 0.673-1.642 0.673-2.148 0-0.28-0.323-0.674-0.968-1.179s-0.968-1.038-0.968-1.599c0-0.477 0.168-1.066 0.505-1.768-0.365-0.421-0.799-0.632-1.305-0.632-1.123 0-1.684 0.366-1.684 1.095 0-0.505 0-0.127 0 1.137 0.027 0.926-0.674 1.39-2.106 1.39-1.094 0-2.934-0.253-5.515-0.758 2.919-0.73 4.379-1.572 4.379-2.526 0 0.112-0.056-0.224-0.168-1.011-0.113-0.869 0.505-1.656 1.852-2.357-0.253-1.291-0.925-1.938-2.021-1.938-0.168 0-0.478 0.295-0.926 0.883-0.449 0.591-0.87 0.885-1.262 0.885-0.674 0-1.545-0.73-2.61-2.19-0.506-0.729-1.278-1.81-2.316-3.242 0.645 0.338 1.291 0.674 1.937 1.011 0.842 0.392 1.515 0.589 2.021 0.589 0.393 0 0.779-0.344 1.158-1.032s0.877-1.032 1.495-1.032c0.085 0 0.646 0.168 1.684 0.506 0.533-0.814 0.8-1.418 0.8-1.811 0-0.337-0.204-0.723-0.611-1.158s-0.779-0.652-1.116-0.652c-0.141 0-0.358 0.042-0.653 0.126-0.294 0.084-0.512 0.127-0.652 0.127-0.506 0-0.758-0.632-0.758-1.895 0-0.337 0.323-2.259 0.969-5.768-0.029 0.42 0.154 1.207 0.547 2.357 0.477 1.404 1.038 2.105 1.685 2.105 0.111 0 0.336-0.084 0.673-0.253s0.603-0.252 0.8-0.252c0.645 0 1.178 0.365 1.6 1.094l0.632 1.137c0.589 0 1.081-0.21 1.473-0.631s0.59-0.927 0.59-1.516c0-0.617-0.259-1.088-0.779-1.411s-0.78-0.568-0.78-0.737c0-0.59 0.927-1.586 2.779-2.989 1.487-1.122 2.456-1.782 2.906-1.979-1.207 1.628-1.811 2.82-1.811 3.579 0 0.393 0.238 0.815 0.716 1.263 0.589 0.533 0.926 0.912 1.010 1.137 0.28 0.647 0.252 1.53-0.084 2.653 0.758 0.534 1.333 0.8 1.727 0.8 0.813 0 1.221-0.422 1.221-1.263 0-0.084-0.035-0.351-0.105-0.8-0.071-0.449-0.091-0.702-0.064-0.758 0.112-0.393 0.884-0.59 2.316-0.59 0.898 0 2.764 0.253 5.6 0.758-0.618 0.168-1.544 0.42-2.779 0.758-1.123 0.337-1.685 0.716-1.685 1.137 0 0.197 0.070 0.533 0.211 1.010s0.211 0.828 0.211 1.053c0 0.392-0.253 0.758-0.758 1.094l-1.432 1.011c0.337 0.618 0.561 0.983 0.674 1.094 0.28 0.336 0.659 0.505 1.137 0.505 0.337 0 0.645-0.295 0.926-0.884s0.73-0.884 1.347-0.884c0.758 0 1.614 0.702 2.569 2.106 0.532 0.788 1.36 1.98 2.483 3.58zM22.569 15.917c0-1.796-0.66-3.354-1.98-4.674s-2.877-1.979-4.673-1.979c-1.825 0-3.397 0.653-4.716 1.959s-1.993 2.87-2.021 4.694c-0.029 1.796 0.638 3.347 2 4.651 1.362 1.305 2.94 1.959 4.736 1.959 1.909 0 3.501-0.625 4.778-1.874 1.278-1.248 1.902-2.827 1.875-4.736zM21.937 15.917c0 1.712-0.576 3.131-1.727 4.252-1.152 1.124-2.583 1.685-4.295 1.685-1.656 0-3.074-0.575-4.252-1.727-1.178-1.15-1.768-2.554-1.768-4.21 0-1.627 0.596-3.025 1.788-4.189 1.194-1.165 2.604-1.748 4.232-1.748s3.038 0.589 4.232 1.769c1.193 1.179 1.79 2.568 1.79 4.168z",
  BLACK:"M31.406 15.477c0 2.089-0.76 3.513-2.279 4.273-0.444 0.222-1.836 0.522-4.178 0.902-1.519 0.254-2.278 0.839-2.278 1.756v3.845c0 0.16 0.047 0.649 0.142 1.472l0.143 1.52c0 0.475-0.111 1.251-0.333 2.327-0.601 0.126-1.298 0.268-2.089 0.428-0.254-0.951-0.38-1.599-0.38-1.948 0-0.157 0.040-0.396 0.119-0.712 0.078-0.316 0.12-0.553 0.12-0.713 0-0.22-0.197-0.838-0.59-1.85h-0.736c-0.098 0.158-0.13 0.364-0.098 0.617 0.126 0.538 0.174 0.997 0.143 1.377-0.538 0.38-1.282 0.886-2.232 1.519-0.222-0.063-0.3-0.095-0.238-0.095v-3.371c-0.062-0.157-0.221-0.22-0.475-0.19h-0.569l-0.569 4.462c-0.444 0.032-0.981 0.032-1.614 0-0.223-1.044-0.617-2.594-1.187-4.652h-0.38c-0.349 1.109-0.538 1.711-0.57 1.805 0 0.126 0.039 0.371 0.119 0.735 0.078 0.364 0.118 0.609 0.118 0.736 0 0.095-0.032 0.332-0.095 0.712l-0.143 1.139c-0.064 0.063-0.143 0.095-0.237 0.095-0.949 0-1.583-0.237-1.899-0.711-0.316-0.475-0.444-1.14-0.38-1.995l0.38-5.696c0-0.095 0.031-0.222 0.095-0.38 0.062-0.158 0.095-0.269 0.095-0.332 0-0.254-0.269-0.76-0.807-1.52-0.094-0.031-0.586-0.143-1.471-0.333-0.539-0.126-1.599-0.348-3.181-0.665-2.185-0.41-3.276-2.167-3.276-5.269 0-4.621 1.9-8.466 5.698-11.536 0.157 0.855 0.427 1.993 0.806 3.418 0.285 0.064 0.903 0.206 1.852 0.427 0.191 0.064 1.156 0.412 2.897 1.045-0.887-0.538-2.042-1.408-3.466-2.611-0.538-0.633-0.807-1.692-0.807-3.18 0-0.348 0.602-0.76 1.805-1.236 1.075-0.443 1.883-0.695 2.421-0.759 1.709-0.22 3.022-0.333 3.941-0.333 3.955 0 7.151 1.014 9.588 3.039-0.79 0.918-2.152 1.898-4.082 2.942 0.76 0.032 1.868-0.268 3.323-0.902 1.455-0.632 2.073-0.949 1.852-0.949 0.253 0 0.76 0.507 1.52 1.519 0.569 0.759 1.028 1.441 1.377 2.041 1.012 1.805 1.692 3.751 2.042 5.839 0 0.729 0.015 1.251 0.047 1.567v0.38h0.001zM13.224 16.332c0-1.361-0.594-2.651-1.78-3.87s-2.461-1.827-3.822-1.827c-1.203 0-2.263 0.51-3.181 1.529s-1.377 2.151-1.377 3.393c0 1.082 0.522 1.784 1.567 2.102 0.665 0.192 1.597 0.303 2.801 0.334h2.611c2.119 0.032 3.181-0.522 3.181-1.661zM18.398 22.219v-1.472c-0.221-0.411-0.443-0.838-0.664-1.282-0.19-0.634-0.538-1.52-1.045-2.659l-0.523 5.555c0 0.444-0.095 0.665-0.285 0.665-0.126 0-0.221-0.031-0.285-0.094-0.222-3.355-0.333-4.811-0.333-4.369v-1.661c-0.064-0.096-0.142-0.143-0.237-0.143-1.077 1.109-1.614 2.897-1.614 5.365 0 1.361 0.125 2.2 0.379 2.517 0.254-0.063 0.538-0.174 0.855-0.332 0.126-0.064 0.49-0.095 1.093-0.095 0.6 0 1.329 0.19 2.183 0.569 0.316 0 0.475-0.854 0.475-2.562zM29.127 15.604c0-1.275-0.475-2.413-1.424-3.416s-2.042-1.505-3.275-1.505c-1.329 0-2.572 0.608-3.727 1.827s-1.733 2.492-1.733 3.822c0 1.108 0.538 1.661 1.614 1.661h5.459c2.057-0.031 3.086-0.828 3.086-2.389z",
};

// Create mask functions for each
const createRedManaMask = (blur: number) => createSVGMask(MANA_PATHS.RED, "0 0 32 32", blur);
const createBlueManaMask = (blur: number) => createSVGMask(MANA_PATHS.BLUE, "0 0 32 32", blur);
const createGreenManaMask = (blur: number) => createSVGMask(MANA_PATHS.GREEN, "0 0 32 32", blur);
const createWhiteManaMask = (blur: number) => createSVGMask(MANA_PATHS.WHITE, "0 0 32 32", blur);
const createBlackManaMask = (blur: number) => createSVGMask(MANA_PATHS.BLACK, "0 0 32 32", blur);

type ManaColor = 'black' | 'blue' | 'red' | 'green' | 'white'

export enum ManaSymbol {
    RED = 'red',
    BLUE = 'blue',
    GREEN = 'green',
    WHITE = 'white',
    BLACK = 'black',
}

export const createManaMask = (color: ManaColor, blur: number) => {
  const maskFunctions = {
    black: createBlackManaMask,
    blue: createBlueManaMask,
    red: createRedManaMask,
    green: createGreenManaMask,
    white: createWhiteManaMask,
  }
  return maskFunctions[color](blur)
}